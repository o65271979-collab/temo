<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© - Temo</title>
    <link rel="stylesheet" href="styles-pro.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
        }

        .test-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .test-section h3 {
            margin-top: 0;
            color: #2563eb;
            border-bottom: 2px solid #2563eb;
            padding-bottom: 10px;
        }

        .test-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .test-btn {
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-family: inherit;
            font-size: 14px;
        }

        .test-btn-success {
            background: #10b981;
            color: white;
        }

        .test-btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .test-btn-warning {
            background: #f59e0b;
            color: white;
        }

        .test-btn-warning:hover {
            background: #d97706;
            transform: translateY(-2px);
        }

        .test-btn-error {
            background: #ef4444;
            color: white;
        }

        .test-btn-error:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .test-btn-info {
            background: #3b82f6;
            color: white;
        }

        .test-btn-info:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }

        .info-box {
            background: #f0f9ff;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 14px;
            color: #1e40af;
        }

        .status {
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            font-weight: 500;
        }

        .status.active {
            background: #dcfce7;
            color: #166534;
        }

        .status.inactive {
            background: #fee2e2;
            color: #991b1b;
        }

        .settings-link {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 16px;
            background: #2563eb;
            color: white;
            border-radius: 6px;
            text-decoration: none;
            cursor: pointer;
            border: none;
            font-family: inherit;
            font-weight: 500;
        }

        .settings-link:hover {
            background: #1d4ed8;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-utensils"></i>
                <h1>Temo</h1>
            </div>
            <nav class="nav">
                <a href="index.html" class="nav-link"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="test-advanced-notifications.html" class="nav-link active"><i class="fas fa-flask"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</a>
            </nav>
        </header>

        <main class="main">
            <div class="test-container">
                <h1><i class="fas fa-flask"></i> Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h1>

                <!-- Sales Notifications -->
                <div class="test-section">
                    <h3><i class="fas fa-chart-line"></i> Ø§Ø®ØªØ¨Ø§Ø± ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
                    <p>Ø§Ø®ØªØ¨Ø± ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¹Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ù…Ù†Ø®ÙØ¶Ø©</p>
                    
                    <div class="test-buttons">
                        <button class="test-btn test-btn-success" onclick="testHighSales()">
                            <i class="fas fa-arrow-up"></i> Ù…Ø¨ÙŠØ¹Ø§Øª Ø¹Ø§Ù„ÙŠØ©
                        </button>
                        <button class="test-btn test-btn-warning" onclick="testLowSales()">
                            <i class="fas fa-arrow-down"></i> Ù…Ø¨ÙŠØ¹Ø§Øª Ù…Ù†Ø®ÙØ¶Ø©
                        </button>
                    </div>

                    <div class="info-box">
                        <i class="fas fa-info-circle"></i> 
                        Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…Ø¹ÙŠÙ†Ø© ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                    </div>
                </div>

                <!-- Expense Notifications -->
                <div class="test-section">
                    <h3><i class="fas fa-money-bill-wave"></i> Ø§Ø®ØªØ¨Ø§Ø± ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</h3>
                    <p>Ø§Ø®ØªØ¨Ø± ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ÙƒØ¨ÙŠØ±Ø© ÙˆØ§Ù„Ø­Ø±Ø¬Ø©</p>
                    
                    <div class="test-buttons">
                        <button class="test-btn test-btn-warning" onclick="testHighExpense()">
                            <i class="fas fa-exclamation"></i> Ù…ØµØ±ÙˆÙ ÙƒØ¨ÙŠØ±
                        </button>
                        <button class="test-btn test-btn-error" onclick="testCriticalExpense()">
                            <i class="fas fa-exclamation-triangle"></i> Ù…ØµØ±ÙˆÙ Ø­Ø±Ø¬
                        </button>
                    </div>

                    <div class="info-box">
                        <i class="fas fa-info-circle"></i> 
                        Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø­Ø±Ø¬Ø© ØªØ¸Ù‡Ø± Ø¨ØªÙ†Ø¨ÙŠÙ‡ Ø£Ø­Ù…Ø± ÙˆØµÙˆØª Ø£Ø¹Ù„Ù‰
                    </div>
                </div>

                <!-- Performance Notifications -->
                <div class="test-section">
                    <h3><i class="fas fa-tachometer-alt"></i> Ø§Ø®ØªØ¨Ø§Ø± ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</h3>
                    <p>Ø§Ø®ØªØ¨Ø± Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…ÙŠ</p>
                    
                    <div class="test-buttons">
                        <button class="test-btn test-btn-info" onclick="testDailyPerformance()">
                            <i class="fas fa-chart-bar"></i> Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…ÙŠ
                        </button>
                    </div>

                    <div class="info-box">
                        <i class="fas fa-info-circle"></i> 
                        ÙŠØªØ¶Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ ÙˆØ§Ù„Ø±Ø¨Ø­ ÙˆÙ†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­
                    </div>
                </div>

                <!-- Manual Notifications -->
                <div class="test-section">
                    <h3><i class="fas fa-bell"></i> Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙŠØ¯ÙˆÙŠØ©</h3>
                    <p>Ø§Ø®ØªØ¨Ø± Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©</p>
                    
                    <div class="test-buttons">
                        <button class="test-btn test-btn-success" onclick="testSuccessNotification()">
                            <i class="fas fa-check-circle"></i> Ù†Ø¬Ø§Ø­
                        </button>
                        <button class="test-btn test-btn-warning" onclick="testWarningNotification()">
                            <i class="fas fa-exclamation-circle"></i> ØªØ­Ø°ÙŠØ±
                        </button>
                        <button class="test-btn test-btn-error" onclick="testErrorNotification()">
                            <i class="fas fa-times-circle"></i> Ø®Ø·Ø£
                        </button>
                        <button class="test-btn test-btn-info" onclick="testInfoNotification()">
                            <i class="fas fa-info-circle"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
                        </button>
                    </div>

                    <div class="info-box">
                        <i class="fas fa-info-circle"></i> 
                        Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
                    </div>
                </div>

                <!-- System Status -->
                <div class="test-section">
                    <h3><i class="fas fa-cog"></i> Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                    
                    <div id="systemStatus">
                        <p>Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…...</p>
                    </div>

                    <button class="settings-link" onclick="openAdvancedNotificationSettings()">
                        <i class="fas fa-sliders-h"></i> ÙØªØ­ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                    </button>
                </div>

                <!-- Test Results -->
                <div class="test-section">
                    <h3><i class="fas fa-list"></i> Ø³Ø¬Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</h3>
                    <div id="testLog" style="background: #f8fafc; padding: 15px; border-radius: 6px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto;">
                        <p style="color: #6b7280;">Ø³ÙŠØ¸Ù‡Ø± Ø³Ø¬Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù‡Ù†Ø§...</p>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2025 Temo. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <script src="firebase-config.js"></script>
    <script src="notifications.js"></script>
    <script src="advanced-notifications.js"></script>

    <script>
        let testCount = 0;

        function logTest(message) {
            testCount++;
            const log = document.getElementById('testLog');
            const timestamp = new Date().toLocaleTimeString('ar-EG');
            const entry = document.createElement('div');
            entry.style.padding = '8px';
            entry.style.borderBottom = '1px solid #e5e7eb';
            entry.innerHTML = `<span style="color: #3b82f6;">[${timestamp}]</span> ${message}`;
            
            if (log.children.length > 0 && log.children[0].textContent.includes('Ø³ÙŠØ¸Ù‡Ø± Ø³Ø¬Ù„')) {
                log.innerHTML = '';
            }
            
            log.insertBefore(entry, log.firstChild);
            
            if (log.children.length > 20) {
                log.removeChild(log.lastChild);
            }
        }

        function updateSystemStatus() {
            const status = document.getElementById('systemStatus');
            const isInitialized = window.advancedNotificationManager ? 'âœ… Ù…Ù‡ÙŠØ£' : 'âŒ ØºÙŠØ± Ù…Ù‡ÙŠØ£';
            const notificationManager = window.notificationManager ? 'âœ… Ù…ÙˆØ¬ÙˆØ¯' : 'âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯';
            const firebaseReady = window.db ? 'âœ… Ù…ØªØµÙ„' : 'âŒ ØºÙŠØ± Ù…ØªØµÙ„';

            status.innerHTML = `
                <div class="status active">
                    <i class="fas fa-check-circle"></i> Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©: ${isInitialized}
                </div>
                <div class="status active">
                    <i class="fas fa-check-circle"></i> Ù…Ø¯ÙŠØ± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª: ${notificationManager}
                </div>
                <div class="status ${window.db ? 'active' : 'inactive'}">
                    <i class="fas fa-${window.db ? 'check-circle' : 'times-circle'}"></i> Firebase: ${firebaseReady}
                </div>
            `;
        }

        // Test Functions
        function testHighSales() {
            logTest('ğŸ‰ Ø§Ø®ØªØ¨Ø§Ø±: Ù…Ø¨ÙŠØ¹Ø§Øª Ø¹Ø§Ù„ÙŠØ©');
            if (window.advancedNotificationManager) {
                const sale = {
                    id: 'test_high_' + Date.now(),
                    totalSales: 6000,
                    ordersCount: 20,
                    date: new Date()
                };
                window.advancedNotificationManager.analyzeSalesAlert(sale);
            } else {
                logTest('âŒ Ø®Ø·Ø£: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ù…Ù‡ÙŠØ£');
            }
        }

        function testLowSales() {
            logTest('âš ï¸ Ø§Ø®ØªØ¨Ø§Ø±: Ù…Ø¨ÙŠØ¹Ø§Øª Ù…Ù†Ø®ÙØ¶Ø©');
            if (window.advancedNotificationManager) {
                const sale = {
                    id: 'test_low_' + Date.now(),
                    totalSales: 500,
                    ordersCount: 5,
                    date: new Date()
                };
                window.advancedNotificationManager.analyzeSalesAlert(sale);
            } else {
                logTest('âŒ Ø®Ø·Ø£: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ù…Ù‡ÙŠØ£');
            }
        }

        function testHighExpense() {
            logTest('âš ï¸ Ø§Ø®ØªØ¨Ø§Ø±: Ù…ØµØ±ÙˆÙ ÙƒØ¨ÙŠØ±');
            if (window.advancedNotificationManager) {
                const expense = {
                    id: 'test_exp_high_' + Date.now(),
                    amount: 2500,
                    category: 'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©',
                    description: 'Ø´Ø±Ø§Ø¡ Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ø®ØªØ¨Ø§Ø±',
                    date: new Date()
                };
                window.advancedNotificationManager.analyzeExpenseAlert(expense);
            } else {
                logTest('âŒ Ø®Ø·Ø£: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ù…Ù‡ÙŠØ£');
            }
        }

        function testCriticalExpense() {
            logTest('ğŸš¨ Ø§Ø®ØªØ¨Ø§Ø±: Ù…ØµØ±ÙˆÙ Ø­Ø±Ø¬');
            if (window.advancedNotificationManager) {
                const expense = {
                    id: 'test_exp_critical_' + Date.now(),
                    amount: 6000,
                    category: 'ØµÙŠØ§Ù†Ø©',
                    description: 'Ø¥ØµÙ„Ø§Ø­ Ù…Ø¹Ø¯Ø§Øª Ø§Ø®ØªØ¨Ø§Ø±',
                    date: new Date()
                };
                window.advancedNotificationManager.analyzeExpenseAlert(expense);
            } else {
                logTest('âŒ Ø®Ø·Ø£: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ù…Ù‡ÙŠØ£');
            }
        }

        function testDailyPerformance() {
            logTest('ğŸ“Š Ø§Ø®ØªØ¨Ø§Ø±: Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…ÙŠ');
            if (window.advancedNotificationManager) {
                window.advancedNotificationManager.analyzePerformance();
            } else {
                logTest('âŒ Ø®Ø·Ø£: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ù…Ù‡ÙŠØ£');
            }
        }

        function testSuccessNotification() {
            logTest('âœ… Ø§Ø®ØªØ¨Ø§Ø±: Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­');
            if (window.notificationManager) {
                window.notificationManager.showSuccess('ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!', 'Ù†Ø¬Ø­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±');
            }
        }

        function testWarningNotification() {
            logTest('âš ï¸ Ø§Ø®ØªØ¨Ø§Ø±: Ø¥Ø´Ø¹Ø§Ø± ØªØ­Ø°ÙŠØ±');
            if (window.notificationManager) {
                window.notificationManager.showWarning('Ù‡Ø°Ø§ ØªØ­Ø°ÙŠØ± ØªØ¬Ø±ÙŠØ¨ÙŠ', 'ØªØ­Ø°ÙŠØ± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±');
            }
        }

        function testErrorNotification() {
            logTest('âŒ Ø§Ø®ØªØ¨Ø§Ø±: Ø¥Ø´Ø¹Ø§Ø± Ø®Ø·Ø£');
            if (window.notificationManager) {
                window.notificationManager.showError('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±', 'Ø®Ø·Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±');
            }
        }

        function testInfoNotification() {
            logTest('â„¹ï¸ Ø§Ø®ØªØ¨Ø§Ø±: Ø¥Ø´Ø¹Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª');
            if (window.notificationManager) {
                window.notificationManager.showInfo('Ù‡Ø°Ù‡ Ù…Ø¹Ù„ÙˆÙ…Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©', 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±');
            }
        }

        function openAdvancedNotificationSettings() {
            logTest('âš™ï¸ ÙØªØ­ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©');
            if (window.advancedNotificationManager) {
                window.advancedNotificationManager.toggleAdvancedSettings();
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                updateSystemStatus();
                logTest('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±');
                logTest('â„¹ï¸ Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ø²Ø± Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
            }, 2000);
        });

        // Update status every 5 seconds
        setInterval(updateSystemStatus, 5000);
    </script>
</body>
</html>
